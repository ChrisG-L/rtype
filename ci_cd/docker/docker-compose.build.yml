services:
  builder:
    build:
      context: ../..
      dockerfile: ci_cd/docker/Dockerfile.build
    image: rtype-builder:${PREFIX:-latest}
    container_name: "${PREFIX}rtype_builder"
    ports:
      - "${BUILDER_PORT:-8082}:${BUILDER_PORT:-8082}"
    volumes:
      - builder_home:/workspace
    working_dir: /workspace
    environment:
      - WORKSPACE=/workspace
      - BUILDER_PORT=8082

volumes:
  builder_home:
    name: "${PREFIX}builder_home"
